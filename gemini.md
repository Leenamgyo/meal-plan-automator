# Gemini API 연동 계획 및 프롬프트

이 문서는 Meal Chart (식단) 텍스트를 정형화된 JSON 데이터로 변환하기 위해 사용될 Gemini API 활용 방안과 시스템 프롬프트를 정의합니다.

## 목표
사용자가 자유 형식으로 작성한 주간/일간 식단표 텍스트를 입력하면, Gemini API를 통해 날짜별, 식사 시간(조식/중식/석식)별 메뉴 배열로 분류된 형태의 JSON 데이터로 출력받는 것을 목표로 합니다.

## 필요 설정
환경설정 탭에서 사용자가 입력한 **Gemini API 키**를 `localStorage`에서 불러내어 `fetch` API 또는 `@google/generative-ai` SDK를 통해 호출합니다.

## 시스템 프롬프트 (System Instruction)
Gemini 모델에 주입할 기본 프롬프트는 다음과 같습니다.

```text
당신은 식단 분석 및 데이터 정형화 전문가입니다.
사용자가 제공하는 자유로운 텍스트 형식의 식단표를 분석하여 아래의 구조화된 JSON 데이터 포맷으로만 응답해야 합니다. 
다른 설명이나 마크다운 백틱(```json ... ```) 없이 순수 JSON 배열 객체만 반환하세요.

[JSON 출력 형식 예시]
[
  {
    "date": "2024-03-01",
    "day": "금요일",
    "meals": {
      "breakfast": ["현미밥", "미역국", "계란말이", "김치"],
      "lunch": ["잡곡밥", "제육볶음", "상추쌈", "된장찌개"],
      "dinner": ["닭가슴살 샐러드", "고구마 1개", "아몬드 브리즈"]
    }
  }
]

명시되지 않은 식사 시간(예: 아침이 없는 경우)에는 빈 배열 "[]"을 할당하세요.
```

## 프론트엔드 연동 로직 (예정)
1. `src/routes/+page.svelte` 내 'AI 변환 실행하기' 버튼 클릭 이벤트 리스너 추가.
2. 상태 표시 텍스트를 "변환 중..."으로 업데이트 및 버튼 비활성화.
3. 왼쪽 원문 텍스트 에어리어의 내용을 읽어와 위의 시스템 프롬프트와 함께 Gemini REST API로 `POST` 요청.
4. 응답 결과를 파싱하여 오른쪽 출력 텍스트 에어리어에 예쁘게(JSON.stringify(data, null, 2)) 표시.
5. 에러 발생 시 상태 텍스트에 "오류 발생" 표기.
